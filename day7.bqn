s â† â€¢Import "strings.bqn"
exâ€¿in â† â€¢FLinesÂ¨ "input/"âŠ¸âˆ¾Â¨ "ex7.in"â€¿"7.in"
ListToMat â† {âŸ¨â‰  ğ•©, âŒˆÂ´ â‰ Â¨ ğ•©âŸ© â¥Š âˆ¾Â´ğ•©}

hands â† ListToMat " "âŠ¸s.SplitÂ¨ in

Type â† (1+âŠ’+âŠ’âŒ¾âŒ½)
Score â† {2â€¿2â€¿3â€¿3â€¿3: 3.5; 1â€¿2â€¿2â€¿2â€¿2: 2.5; ğ•©: âŒˆÂ´ ğ•©}
order â† ('1'âŠ¸+âŸœâ†•9)âˆ¾"TJQKA"
types â† +Â´Â¨ âŠ’Â¨ âŠ â‰ hands
# first_cards â† {âŠ‘ order âŠ ğ•©}Â¨ 1â†‘Â¨ (âŠË˜ hands)
# ranking â† types (14â‹†6)âŠ¸Ã—âŠ¸+ (+Â´Â¨ (14â‹†âŒ½â†•5) Ã— {âŠ‘ order âŠ ğ•©}Â¨Â¨ (âŠË˜ hands))
hands_with_rank â† hands âˆ¾Ë˜ (types âˆ¾Â¨ ({âŠ‘ order âŠ ğ•©}Â¨Â¨ (âŠË˜ hands)))    
ordered_bids â† â€¢ParseFloatÂ¨ 1âŠË˜ (2âŠ¸âŠË˜)âŠ¸(â’âŠ¸âŠ) hands_with_rank
bid_multiplier â† âŒ½ 1âŠ¸+â†•â‰ ordered_bids
winnings â† +Â´ bid_multiplier Ã— ordered_bids


(2âŠ¸âŠË˜)âŠ¸(â’âŠ¸âŠ) hands_with_rank
# foo â† hands âˆ¾Ë˜ ({âŠ‘ order âŠ ğ•©}Â¨Â¨ (âŠË˜ hands))
# bar â† hands âˆ¾Ë˜ (types âˆ¾Â¨ ({âŠ‘ order âŠ ğ•©}Â¨Â¨ (âŠË˜ hands)))
# â€¢ParseFloatÂ¨ 1âŠË˜ (2âŠ¸âŠË˜)âŠ¸(â’âŠ¸âŠ) bar

T â† âˆ§(1+âŠ’+âŠ’âŒ¾âŒ½)
Score â† {2â€¿2â€¿3â€¿3â€¿3: 3.5; 1â€¿2â€¿2â€¿2â€¿2: 2.5; ğ•©: âŒˆÂ´ ğ•©}
u â† "AAAAT"â€¿"AAAJJ"â€¿"AAAQJ"â€¿"AAQQJ"â€¿"AAQJT"â€¿"AKQJT"â€¿"JJJ28"
ScoreÂ¨ TÂ¨ u
eâ† "KK677"
T "KK677"

(âˆŠ e) â‰ (âŠ’ e) 
(âŠ e)

S â† 11âŠ¸- +Â´Â¨ âŠ’Â¨

âŠ’ "T55J5"

# use a choose
# 4 of a kind, full house, and three of a kind 
# with any number of jokers are just four of a kind
# two pair will always go to full house
# one pair will go to # jokers + 2 (3 or 4 of a kind)
# high card will go to # jokers + 1

Q â† âŠ£â—¶âŸ¨1Ë™, 2Ë™, 3âŠ¸Ã—, 6Ë™, 6Ë™, 6Ë™, 6Ë™âŸ©

O â† {ğ•© âŠ‘ 1â€¿3â€¿4â€¿6â€¿10â€¿10â€¿10â€¿10}
TW â† {ğ•© âŠ‘ 3â€¿6â€¿10â€¿10â€¿10â€¿10â€¿10â€¿10}
TR â† {ğ•© âŠ‘ 6â€¿10â€¿10â€¿10â€¿10â€¿10â€¿10â€¿10}
TP â† 10Ë™

# this is funky but ğ•¨ is # jokers and
# ğ•© is rank before
# basically it gives the possible rank given the number of jokers
R â† âŠ£â—¶âŸ¨âŠ¢,O, TW, TR, TP, TP, TP, TPâŸ©

order â† "J"âˆ¾('1'âŠ¸+âŸœâ†•9)âˆ¾"TQKA"
unadjusted_types â† 6âŠ¸âŒŠ +Â´Â¨ âŠ’Â¨ â‰ âŸœ'J'âŠ¸/Â¨ âŠ â‰ hands
jokers â† â‰ Â¨ =âŸœ'J'âŠ¸/Â¨ âŠ â‰ hands
types â† jokers RÂ¨ unadjusted_types
hands_with_rank â† hands âˆ¾Ë˜ (types âˆ¾Â¨ ({âŠ‘ order âŠ ğ•©}Â¨Â¨ (âŠË˜ hands)))    
ordered_bids â† â€¢ParseFloatÂ¨ 1âŠË˜ (2âŠ¸âŠË˜)âŠ¸(â’âŠ¸âŠ) hands_with_rank
bid_multiplier â† âŒ½ 1âŠ¸+â†•â‰ ordered_bids
winnings â† +Â´ bid_multiplier Ã— ordered_bids

4 R 6

te â† "JJJ34"â€¿"JJJJJ"â€¿"JJJ8J"
a â† â‰ Â¨ =âŸœ'J'âŠ¸/Â¨ te
b â† +Â´Â¨ âŠ’Â¨ te
c â† +Â´Â¨ âŠ’Â¨ â‰ âŸœ'J'âŠ¸/Â¨ te

a RÂ¨ c
6âŠ¸âŒŠ+Â´Â¨ âŠ’Â¨ u
âŒ½ ordered_bids

âˆ¨ ({âŠ‘ order âŠ ğ•©}Â¨Â¨ te)