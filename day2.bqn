s â† â€¢Import "strings.bqn"
u â† â€¢Import "utils.bqn"

ex â† â€¢FLines "input/ex2.in"
in â† â€¢FLines "input/2.in"

line â† âŠ‘ ex
pick â† " 1 red, 2 green, 6 blue"

ParseGame â† {âŠ‘ 1 â†“ (";"âŠ¸s.Split)Â¨ (":" s.Split ğ•©)}

ParseColorPair â† {
    aâ€¿"blue": (u.ToDec a)â€¿0â€¿0;
    bâ€¿"green": 0â€¿(u.ToDec b)â€¿0;
    câ€¿"red": 0â€¿0â€¿(u.ToDec c)
}

ParsePick â† {" "âŠ¸s.SplitÂ¨ s.TrimÂ¨ ("," s.Split ğ•©)}

SumPick â† {+Â´ ParseColorPairÂ¨ ğ•©}
SumGame â† {> (SumPickÂ¨ ParsePickÂ¨ ğ•©)}

valid â† 14â€¿13â€¿12
GameIsValid â† {âŒŠÂ´ â¥Š valid â‰¥ â‰ğ•©}

Part1 â† {ğ•©:
    validMask â† GameIsValidÂ¨ SumGameÂ¨ ParseGameÂ¨ ğ•©
    idSum â† +Â´ validMask Ã— 1 + â†• â‰ validMask
}

MinCount â† {âŒˆË ğ•©}

Part2 â† {powerSum â† +Â´ (Ã—Â´)Â¨ MinCountÂ¨ SumGameÂ¨ ParseGameÂ¨ ğ•©}

gameSums â† SumGameÂ¨ ParseGameÂ¨ ex

â€¢Show Part1 in
â€¢Show Part2 in